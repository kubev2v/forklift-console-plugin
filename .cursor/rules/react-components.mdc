---
description: React component patterns and PatternFly usage
globs: "**/*.tsx"
alwaysApply: false
---

# React Component Patterns (Supplement)

For core React conventions (functional components, FC type, imports, hooks rules), see **CLAUDE.md**. This rule adds PatternFly and Console SDK patterns.

---

## 1. PatternFly Component Usage

### Use Enums for Variants
```typescript
import { Button, ButtonVariant } from '@patternfly/react-core';

// Always use enum, not string literal
<Button variant={ButtonVariant.primary}>Save</Button>
<Button variant={ButtonVariant.link}>Cancel</Button>
```

### Custom Select Component
Always use the project's custom Select wrapper for consistency:
```typescript
import Select from '@components/common/Select';
// NOT: import { Select } from '@patternfly/react-core';
```

### Common PatternFly Patterns
```typescript
import {
  Alert,
  AlertVariant,
  EmptyState,
  EmptyStateVariant,
  Spinner,
  Title,
} from '@patternfly/react-core';
```

---

## 2. Console SDK Integration

### Watching Resources
```typescript
import { useK8sWatchResource } from '@openshift-console/dynamic-plugin-sdk';

const [providers, loaded, error] = useK8sWatchResource<V1beta1Provider[]>({
  groupVersionKind: ProviderModelGroupVersionKind,
  isList: true,
  namespaced: true,
  namespace,
});
```

### Resource Operations
```typescript
import { k8sCreate, k8sUpdate, k8sDelete, k8sPatch } from '@openshift-console/dynamic-plugin-sdk';
```

### Active Namespace
```typescript
import { useActiveNamespace } from '@openshift-console/dynamic-plugin-sdk';
const [activeNamespace] = useActiveNamespace();
```

---

## 3. Component Inside Order

1. Translation hook (`useForkliftTranslation`)
2. Router hooks (`useParams`, `useNavigate`)
3. Data fetching hooks (`useK8sWatchResource`)
4. Local state (`useState`)
5. Derived values (`useMemo`)
6. Callbacks (`useCallback`)
7. Effects (`useEffect`)
8. Early returns (loading, error, empty states)
9. Main JSX return

---

## 4. State Handling

### Loading State
```typescript
import LoadingSuspend from '@components/LoadingSuspend';

<LoadingSuspend obj={data} loaded={loaded} loadError={error}>
  <MyContent data={data} />
</LoadingSuspend>
```

### Empty State Check
```typescript
import { isEmpty } from '@utils/helpers';

if (isEmpty(providers)) {
  return <EmptyState variant={EmptyStateVariant.lg}>...</EmptyState>;
}
```

---

## 5. Forms

### react-hook-form Pattern
```typescript
import { useForm, FormProvider } from 'react-hook-form';

const methods = useForm<FormValues>({ defaultValues });
const { control, handleSubmit, formState: { errors } } = methods;
```

---

## 6. Test Identifiers

Use `testId` prop for test selectors:
```typescript
<Button testId="create-plan-button" variant={ButtonVariant.primary}>
  {t('Create plan')}
</Button>
```
